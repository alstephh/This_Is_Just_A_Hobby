BASIC PENTESTING 	TRYHACKME

===PORTS==================

22	SSH
80	Apache 2.4.18
139	Samba SMB
445	Samba SMB
8009	ajp13(?)
8080	http-proxy Apache tomcat/9.0.7


In 8080 is exposed the apache tomcat dashboard but we nee credentials for going inside maybe we will do some command injection or
upload injection (intuition based on  my little experience where I've done something similar with same tomcat dashboard)


===DIRECTORUY=BUSTING======

/development

Here we got 2 text file that rappresent some type of conversation between 2 user K and J
	
	1] dev.txt = The 2 user communicate each other their work and with thtaat we discover that SMB is version 2.5.12
	2] j.txt   = here K is telling to J to change is password cuz is weak and he was able to crack the hash in the /etc/shadw
	
===ENUMEMARATION===========

Was really confused on the task "bruteforce user and passwords" I tried with hydra on port 8080 but nothing even ssh but nothing.
Here I just took a look at a walkthrough and answer was use enum4linux, never used this tool before so now I got a new tool that can
be usefull.
This tool enumarate using the Samba service and can be used for linux and Windows machines, with this said some info like usernames
should be pop out as output.
And we have KAY and JAN as username, 1 step done. Important to remember we can scrap other info with this tool like printer info usefull
if PrintNightmare is possible or whatever exploit on printer, Groups, Domain, Pasword Policy (ecc...)

PasswordPolicy = length of 5 and maximum password age of 37 days

Now the real brute-force comes in play we can use the username [jan] on the ssh service and bruteforce the passsword using hydra
results are jan:armando good thing we can make our first foothold now.


===FOOTHOLD===============================

First thing first use linpeas for enumarate the machine internally

JAN have id 1001 / KAY have id 1000

As the hint suggest if we have another username but not the password is not definetly useless there are method of accss without the pass
like using the key login.

In the home folder of kay we can look at the whole .ssh directory, even the private key that will be copied on attacker machine



===PRIVILEGE=ESCALATION=======================

We have the key of KAY in local so we can try to login with ssh using that key but a passphrase is needed.
here john the ripper will help us (passphrase is the secret for encryption/decryption used for the chiper used for protect RSA key)

Here the simple steps that you NEED TO follow for find the passphrase :

	1] locate and transfer in local the ssh key
	2] transform the ssh key in a format that john the ripper can crack with ssh2john (save the output) 
	3] use john the ripper on the [2] output (obv with a wordlist) the output will be the passhprase cracked 
	 
I've obtained "beeswax" as passphrase, we input that when ssh ask it and we got it!

Really easy machine (just confused a bit with the general tip "brute force user and password") but helped me discovered 2 things:

	1] enum4linux for samba
	2] crack passphrase of rsa key





 





